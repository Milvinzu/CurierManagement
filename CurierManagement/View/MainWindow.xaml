<Window x:Class="CurierManagement.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CurierManagement"
        mc:Ignorable="d" WindowStartupLocation="CenterScreen"
        SizeToContent="Height" Width="600" Title="Система управління кур'єрами"
        ResizeMode="CanMinimize" Icon="{StaticResource AppIcon}">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0" 
                   Text="Налаштування підключення" 
                   FontSize="24" 
                   FontWeight="Bold" 
                   HorizontalAlignment="Center"
                   Foreground="#2E7D32"/>

        <!-- Ім'я користувача -->
        <StackPanel Grid.Row="2" Orientation="Horizontal">
            <TextBlock Text="Ваше ім'я:" 
                       VerticalAlignment="Center" 
                       FontSize="14" 
                       Width="120"/>
            <TextBox x:Name="UserNameTextBox" 
                     Text="{Binding UserName, UpdateSourceTrigger=PropertyChanged}"
                     Width="200" 
                     Height="30" 
                     FontSize="14"
                     Padding="5"/>
        </StackPanel>

        <!-- Вибір режиму -->
        <GroupBox Grid.Row="4" Header="Режим роботи" FontSize="14" Padding="10">
            <StackPanel>
                <RadioButton x:Name="PrimaryModeRadio"
                             Content="Головний ПК (створити сервер)"
                             IsChecked="{Binding IsPrimaryMode}"
                             FontSize="14"
                             Margin="0,5"/>
                <RadioButton x:Name="SecondaryModeRadio"
                             Content="Другорядний ПК (підключитися до сервера)"
                             IsChecked="{Binding IsSecondaryMode}"
                             FontSize="14"
                             Margin="0,5"/>
            </StackPanel>
        </GroupBox>

        <!-- Інформація для підключення -->
        <GroupBox Grid.Row="6" Header="{Binding ConnectionInfoHeader}" FontSize="14" Padding="10">
            <StackPanel>
                <!-- Для головного ПК - показ інформації -->
                <StackPanel Visibility="{Binding PrimaryModeVisibility}">
                    <TextBlock Text="Надайте цю інформацію користувачу другорядного ПК:"
                               FontWeight="Bold"
                               Margin="0,0,0,10"
                               Foreground="#1976D2"/>

                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="IP адреса:" Width="100" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding ServerIP}" 
                                 IsReadOnly="True"
                                 Width="150"
                                 Background="#F5F5F5"
                                 Height="25"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Порт:" Width="100" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding ServerPort}" 
                                 IsReadOnly="True"
                                 Width="150"
                                 Background="#F5F5F5"
                                 Height="25"/>
                    </StackPanel>

                    <TextBlock Text="{Binding ConnectionStatusText}"
                               Margin="0,10,0,0"
                               FontWeight="Bold"
                               Foreground="{Binding ConnectionStatusColor}"/>
                </StackPanel>

                <!-- Для другорядного ПК - введення інформації -->
                <StackPanel Visibility="{Binding SecondaryModeVisibility}">
                    <TextBlock Text="Введіть дані для підключення до головного ПК:"
                               FontWeight="Bold"
                               Margin="0,0,0,10"
                               Foreground="#1976D2"/>

                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="IP адреса:" Width="100" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding TargetServerIP, UpdateSourceTrigger=PropertyChanged}" 
                                 Width="200"
                                 Height="25"
                                 ToolTip="Наприклад: 192.168.1.100"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <TextBlock Text="Порт:" Width="100" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding TargetServerPort, UpdateSourceTrigger=PropertyChanged}" 
                                 Width="200"
                                 Height="25"
                                 ToolTip="Наприклад: 5000"/>
                    </StackPanel>

                    <TextBlock Text="{Binding ConnectionStatusText}"
                               Margin="0,10,0,0"
                               FontWeight="Bold"
                               Foreground="{Binding ConnectionStatusColor}"/>
                </StackPanel>
            </StackPanel>
        </GroupBox>

        <!-- Кнопки управління -->
        <StackPanel Grid.Row="9" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center"
                    Margin="0,20,0,0">

            <Button Content="{Binding StartButtonText}"
                    Command="{Binding StartCommand}"
                    Width="120" 
                    Height="35"
                    FontSize="14"
                    Background="#4CAF50"
                    Foreground="White"
                    Margin="5"/>

            <Button Content="Зупинити"
                    Command="{Binding StopCommand}"
                    IsEnabled="{Binding IsConnected}"
                    Width="120" 
                    Height="35"
                    FontSize="14"
                    Background="#F44336"
                    Foreground="White"
                    Margin="5"/>

            <!-- IsEnabled="{Binding CanGoToWork}" -->
            <Button Content="Перейти до роботи"
                    Command="{Binding GoToWorkCommand}"
                    Width="140" 
                    Height="35"
                    FontSize="14"
                    Background="#2196F3"
                    Foreground="White"
                    Margin="5"/>
        </StackPanel>
    </Grid>
</Window>
